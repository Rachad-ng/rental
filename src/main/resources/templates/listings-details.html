<!DOCTYPE html>
<html lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="Layout">

    <head>
        <title>Details d'annoce</title>
    </head>

    <body>

        <!-- Dynamic Content Section Start -->
        <section layout:fragment="content" th:object="${listingDetailsDto}">

            <!--Listing details Top Start-->
            <section class="listing-details-top">
                <div class="container">
                    <ul class="list-unstyled listing-details-top__menu">
                        <li><a th:href="@{/}">Accueil</a></li>
                        <li><span>-</span></li>
                        <li><a th:href="@{/listings}">Offres</a></li>
                        <li><span>-</span></li>
                        <li class="active"><a href="#" th:text="*{model.mark.libelle + ' ' + model.libelle}"></a></li>
                    </ul>
                </div>
            </section>
            <!--Listing details Top End-->

            <!--Listing Details Start-->
            <section class="listing-details">
                <div class="container">
                    <div class="row">

                        <!-- Listing details left block Start -->
                        <div class="col-xl-8 col-lg-7">
                            <div class="listing-details__left">

                                <!-- Block images Start -->
                                <div class="listing-details__gallery clearfix">
                                    <div class="listing-details__gallery-content-box">
                                        <ul class="bxslider list-unstyled clearfix">
                                            <li>
                                                <div class="listing-details__gallery-sliding-img">
                                                    <img th:src="@{'/assets/images/resources/cars/standard/' + *{model.image} + '.jpg'}"
                                                         th:alt="${'Rental car ' + listingDetailsDto.model.mark.libelle + ' ' + listingDetailsDto.model.libelle}">
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Block images End -->

                                <!-- Car additional feautures start -->
                                <div class="listing-details__features">
                                    <div class="row">
                                        <div class="col-xl-4 col-lg-4 col-md-4">
                                            <ul class="list-unstyled listing-details__features-list">
                                                <li th:if="*{airConditioning}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Climatisation</p>
                                                    </div>
                                                </li>
                                                <li th:if="*{androidAvailable}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Systeme Android</p>
                                                    </div>
                                                </li>
                                                <li th:if="*{autoTransmission}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Boite automatique</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-xl-4 col-lg-4 col-md-4">
                                            <ul class="list-unstyled listing-details__features-list">
                                                <li th:if="*{childSeat}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Siège enfant</p>
                                                    </div>
                                                </li>
                                                <li th:if="*{tintedGlass}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Verre teinté</p>
                                                    </div>
                                                </li>
                                                <li th:if="*{sunroof}">
                                                    <div class="icon">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Toit ouvrant</p>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- Car additional feautures End -->

                                <!-- Agence location start -->
                                <div class="listing-details__location">
                                    <div class="listing-details__location-top">
                                        <div class="listing-details__location-top-left">
                                            <h2>Location</h2>
                                        </div>
                                        <div class="listing-details__location-top-right">
                                            <p th:text="*{agent.address.number + ' Rue ' + agent.address.street + ' Hay ' + agent.address.district + ', ' + agent.address.town + '. ' + agent.address.country}"></p>
                                        </div>
                                    </div>
                                    <div class="listing-details__location-map">
                                        <iframe
                                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4562.753041141002!2d-118.80123790098536!3d34.152323469614075!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80e82469c2162619%3A0xba03efb7998eef6d!2sCostco+Wholesale!5e0!3m2!1sbn!2sbd!4v1562518641290!5m2!1sbn!2sbd"
                                                class="listing-details__location-map-box" allowfullscreen></iframe>
                                    </div>
                                </div>
                                <!-- Agence location end -->

                                <!-- Booking form start -->
                                <div class="listing-details__start-booking" id="booking-form">
                                    <h2 class="listing-details__start-booking-title">Reservez votre voiture</h2>

                                    <div class="alert alert-danger py-0 w-50 m-auto text-center mb-3" th:if="${errorMessage}" th:text="${errorMessage}"></div>
                                    <div class="alert alert-danger py-0 w-50 m-auto mb-3" th:if="${bookingStartDateError}" th:text="${bookingStartDateError}"></div>
                                    <div class="alert alert-danger py-0 w-50 m-auto mb-3" th:if="${bookingBackDateError}" th:text="${bookingBackDateError}"></div>

                                    <div class="listing-details__start-booking-wrapper">
                                        <div class="listing-details__start-booking-box tabs-box">
                                            <ul class="tab-btns tab-buttons clearfix list-unstyled">
                                                <li data-tab="#booking" class="tab-btn active-btn"><span>Réservation</span></li>
                                                <li data-tab="#request" class="tab-btn"><span>Autres annonces</span></li>
                                            </ul>
                                            <div class="tabs-content">

                                                <!-- Booking Request form start -->
                                                <div class="tab active-tab" id="booking" th:object="${bookingRequestDto}">
                                                    <div class="listing-details__start-booking-content">

                                                        <form th:action="@{/bookingRequest}" method="post" class="listing-details__start-booking-form-box">
                                                            <ul class="list-unstyled listing-details__start-booking-form clearfix">
                                                                <li class="listing-details__start-booking-input">
                                                            <!--        <div class="alert alert-danger py-0 w-50 m-auto" th:if="${#fields.hasErrors('bookingStartDate')}" th:errors="*{bookingStartDate}"></div>  -->
                                                                    <input type="text" name="bookingStartDate" placeholder="Select start date" id="datepicker" th:field="*{bookingStartDate}">
                                                                    <div class="listing-details__start-bookin-icon-box">
                                                                        <i class="fa fa-calendar"></i>
                                                                    </div>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                            <!--        <div class="alert alert-danger py-0 w-50 m-auto" th:if="${#fields.hasErrors('bookingBackDate')}" th:errors="*{bookingBackDate}"></div>  -->
                                                                    <input type="text" name="bookingBackDate" placeholder="Select back date" id="datepicker2" th:field="*{bookingBackDate}">
                                                                    <div class="listing-details__start-bookin-icon-box">
                                                                        <i class="fa fa-calendar"></i>
                                                                    </div>
                                                                </li>
                                                            </ul>

                                                            <!-- Pour récupérer la page de details en cas d'erreurs -->
                                                            <input type="hidden" name="idCar" th:field="*{idCar}">

                                                            <div class="listing-details__dirver-baby-price-box">
                                                                <div class="listing-details__dirver-baby-price-box-single clearfix">
                                                                    <div class="listing-details__dirver-baby-price-left">
                                                                        <input type="checkbox" name="driver" id="tag_3">
                                                                        <label for="tag_3"><span></span>Chauffeur</label>
                                                                    </div>
                                                                    <div class="listing-details__dirver-baby-price-right">
                                                                        <p>150DH /Jour</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="listing-details__start-booking-btn-box">
                                                                <button type="submit" class="listing-details__start-booking-btn">Reserver</button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                <!-- Booking Request form end -->

                                                <!-- Search other listings form start -->
                                                <div class="tab" id="request">
                                                    <div class="listing-details__start-booking-content">
                                                        <form class="listing-details__start-booking-form-box">
                                                            <ul class="list-unstyled listing-details__start-booking-form clearfix">
                                                                <li class="listing-details__start-booking-input">
                                                                    <select class="selectpicker" aria-label="Default select example">
                                                                        <option selected>Pick-up location</option>
                                                                        <option value="1">One</option>
                                                                        <option value="2">Two</option>
                                                                        <option value="3">Three</option>
                                                                    </select>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                                    <select class="selectpicker" aria-label="Default select example">
                                                                        <option selected>Drop-off location</option>
                                                                        <option value="1">One</option>
                                                                        <option value="2">Two</option>
                                                                        <option value="3">Three</option>
                                                                    </select>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                                    <select class="selectpicker" aria-label="Default select example">
                                                                        <option selected>Select car class</option>
                                                                        <option value="1">One</option>
                                                                        <option value="2">Two</option>
                                                                        <option value="3">Three</option>
                                                                    </select>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                                    <input type="text" name="date" placeholder="Select date" id="datepicker2">
                                                                    <div class="listing-details__start-bookin-icon-box">
                                                                        <i class="fa fa-calendar"></i>
                                                                    </div>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                                    <input type="text" name="time"
                                                                           placeholder="Select time">
                                                                    <div class="listing-details__start-bookin-icon-box">
                                                                        <i class="far fa-clock"></i>
                                                                    </div>
                                                                </li>
                                                                <li class="listing-details__start-booking-input">
                                                                    <select class="selectpicker"
                                                                            aria-label="Default select example">
                                                                        <option selected>Select quantity</option>
                                                                        <option value="1">One</option>
                                                                        <option value="2">Two</option>
                                                                        <option value="3">Three</option>
                                                                    </select>
                                                                </li>
                                                            </ul>
                                                        </form>
                                                        <div class="listing-details__dirver-baby-price-box">
                                                            <div class="listing-details__dirver-baby-price-box-single clearfix">
                                                                <div class="listing-details__dirver-baby-price-left">
                                                                    <input type="checkbox" name="driver" id="tag_1">
                                                                    <label for="tag_1"><span></span>Chauffeur</label>
                                                                </div>
                                                                <div class="listing-details__dirver-baby-price-right">
                                                                    <p>200DH /Jour</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="listing-details__start-booking-btn-box">
                                                            <button type="submit" class="listing-details__start-booking-btn">Book Rent a Car</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Search other listings form end -->

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Booking form end -->

                            </div>
                        </div>
                        <!-- Listing details left block End -->

                        <!-- Listing details right block Start -->
                        <div class="col-xl-4 col-lg-5">
                            <div class="listing-details__right">
                                <h3 class="listing-deails__right-title" th:text="*{model.mark.libelle + ' ' + model.libelle}"></h3>
                                <ul class="list-unstyled listing-deails__right-rating">
                                    <li><i class="fa fa-star"></i></li>
                                    <li><i class="fa fa-star"></i></li>
                                    <li><i class="fa fa-star"></i></li>
                                    <li><i class="fa fa-star"></i></li>
                                    <li><i class="fa fa-star"></i></li>
                                </ul>
                                <div class="listing-details__right-price-box">
                                    <div class="listing-details__right-price-icon">
                                        <span>DH</span>
                                    </div>
                                    <div class="listing-details__right-price-text">
                                        <p th:text="*{pricePerDay + '/Jour'}"></p>
                                    </div>
                                </div>
                                <div class="listing-details__contact-info">
                                    <a href="#booking-form" class="listing-details__contact-info-message">
                                        <div class="icon">
                                            <span class="icon-car-rental"></span>
                                        </div>
                                        <div class="text">
                                            <p>Demande Reservation</p>
                                        </div>
                                    </a>
                                    <a href="#" class="listing-details__contact-info-phone">
                                        <div class="icon">
                                            <span class="icon-phone-call"></span>
                                        </div>
                                        <div class="text">
                                            <h5 th:data-toggle-number="*{agent.tel}" th:data-number="*{agent.hiddenTelNumber}" th:text="*{agent.hiddenTelNumber}"></h5>
                                            <p>Afficher le numero</p>
                                        </div>
                                    </a>
                                    <a th:href="@{${'mailto:' + listingDetailsDto.agent.email}}" class="listing-details__contact-info-message">
                                        <div class="icon">
                                            <span class="icon-mail"></span>
                                        </div>
                                        <div class="text">
                                            <p>Envoyer Message</p>
                                        </div>
                                    </a>
                                </div>
                                <div class="listing-details__share-report-favorite-btn">
                                    <a href="#"><i class="fas fa-share"></i>Share</a>
                                    <a href="#"><i class="fas fa-star"></i>Add to Favorites</a>
                                    <a href="#"><i class="fas fa-flag"></i>Report</a>
                                </div>
                                <div class="listing-details__features-box">
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Marque:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="*{model.mark.libelle}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Modèle:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="*{model.libelle}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Category:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="${listingDetailsDto.category.libelle}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Année:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="${#temporals.year(listingDetailsDto.dateCirculation)}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Type de carburant:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="*{fuel.libelle}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Nombre de places:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="*{numberOfPlaces}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Nombre de portes:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:text="*{numberOfDoors}"></span>
                                        </div>
                                    </div>
                                    <div class="listing-details__features-box-single">
                                        <div class="listing-details__features-box-left">
                                            <p>Color:</p>
                                        </div>
                                        <div class="listing-details__features-box-right">
                                            <span th:style="${'background-color:' + listingDetailsDto.color + '; color: ' + listingDetailsDto.color}">Lorem</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="listing-details__calendar">
                                    <div id="datepicker-inline"></div><!-- /#datepicker-inline -->
                                </div>
                            </div>
                        </div>
                        <!-- Listing details right block End -->

                    </div>
                </div>
            </section>
            <!--Listing Details End-->

            <!--Similar Listings Start-->
            <section class="similar-listings">
                <div class="container">
                    <div class="section-title text-center">
                        <span class="section-title__tagline">Parcourir les offres exceptionnelles</span>
                        <h2 class="section-title__title">Annonces similaires</h2>
                    </div>
                    <div class="row" th:object="${similarListingDtos}">
                        <div class="col-xl-4 col-lg-4" th:each="similarListingDto : ${similarListingDtos}">

                            <!--Listing List Box Single start-->
                            <div class="similar-listings__single">
                                    <a th:href="@{/listingsDetails(id = ${similarListingDto.id})}">
                                        <div class="similar-listings__img">
                                            <img th:src="@{${'/assets/images/resources/cars/minimized/' + similarListingDto.model.image + '-min.jpg'}}" alt="">
                                            <div class="similar-listings__icon">
                                                <i class="fas fa-heart"></i>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="similar-listings__content">
                                        <h5 class="similar-listings__sub-title" th:text="${similarListingDto.category.libelle}"></h5>
                                        <h3 class="similar-listings__title" th:text="${similarListingDto.model.mark.libelle + ' ' + similarListingDto.model.libelle}"></h3>
                                        <p class="similar-listings__price"><span th:text="${similarListingDto.pricePerDay + 'DH'}"> </span>/Jour</p>
                                        <ul class="list-unstyled similar-listings__details">
                                            <li><a th:href="@{/listingsDetails(id = ${similarListingDto.id})}" th:text="${similarListingDto.agent.rsAgence}"></a></li>
                                            <li><a th:href="@{/listingsDetails(id = ${similarListingDto.id})}" th:text="${similarListingDto.agent.address.town}"></a></li>
                                            <li><a th:href="@{/listingsDetails(id = ${similarListingDto.id})}" th:text="${#temporals.year(similarListingDto.dateCirculation) + ' ' + similarListingDto.fuel.libelle}"></a></li>
                                        </ul>
                                    </div>
                                </div>
                            <!--Listing List Box Single end -->

                        </div>
                    </div>
                </div>
            </section>
            <!--Similar Listings End-->

        </section>
        <!-- Dynamic Content Section End -->

    </body>

</html>